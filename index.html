<!DOCTYPE html>
<html>
<head>
  <title>Location Access</title>
</head>
<body>
  <h2>Click to Share Location</h2>
  <button onclick="getLocation()">Share Location</button>

  <script>
    function getLocation() {
      navigator.geolocation.getCurrentPosition(
        async (position) => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;

          await fetch("https://task-management-jkpm.onrender.com/submit-location", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ latitude: lat, longitude: lon })
          });

          window.location.href = "https://task-management-jkpm.onrender.com/result";
        },
        (error) => {
          alert("Location access denied: " + error.message);
        }
      );
    }
  </script>
</body>
</html>
